import{j as t}from"./motion-CORlI5s_.js";import{r as l}from"./leaflet-DdaEX1Yb.js";import{T as b,a as x,b as g}from"./index-CvtOBW7N.js";import"./charts-BaZTNFmG.js";const o=["Motors","Pump","LIDAR","Camera","Comms","Battery"];function v(){const[r,i]=l.useState(()=>o.reduce((e,n)=>(e[n]="idle",e),{})),[a,c]=l.useState(!1),m=a||o.some(e=>r[e]==="running"),u=async()=>{if(m)return;c(!0);const e={...r};for(const n of o)e[n]="running",i({...e}),await new Promise(s=>setTimeout(s,400+Math.random()*600)),e[n]=Math.random()>.08?"ok":"fail",i({...e});c(!1)},p=async e=>{if(a||r[e]==="running")return;i(s=>({...s,[e]:"running"})),await new Promise(s=>setTimeout(s,400+Math.random()*600));const n=Math.random()>.08?"ok":"fail";i(s=>({...s,[e]:n}))},d=l.useMemo(()=>({idle:{badge:"ðŸŸ¡ Standby",tone:"text-amber-200/90",description:"Awaiting diagnostic cycle."},running:{badge:"ðŸŸ¡ Scanning",tone:"text-amber-200/90",description:"Running live checksâ€¦"},ok:{badge:"ðŸŸ¢ Active",tone:"text-emerald-200/90",description:"System operating nominally."},fail:{badge:"ðŸ”´ Error",tone:"text-red-200/90",description:"Fault detected â€” review immediately."}}),[]);return t.jsxs("div",{className:"rounded-2xl border border-red-900/40 bg-[#0b1010] p-4 shadow-[0_0_22px_rgba(239,68,68,0.08)]",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsx("div",{className:"text-xs font-semibold uppercase tracking-widest text-soft",children:"Self-Diagnostics"}),t.jsxs("button",{onClick:u,disabled:m,className:"relative overflow-hidden rounded border border-red-900/40 bg-black/60 px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-red-100 transition hover:bg-red-900/30 disabled:cursor-not-allowed disabled:opacity-60",children:[t.jsx("span",{className:a?"animate-pulse":"",children:a?"Scanning":"Run All"}),a&&t.jsx("span",{className:"absolute inset-0 animate-[pulse_1.5s_linear_infinite] bg-red-500/10","aria-hidden":!0})]})]}),t.jsx("ul",{className:"space-y-2 text-sm",children:o.map(e=>{const n=r[e]||"idle";return t.jsxs("li",{className:"relative overflow-hidden rounded border border-red-900/30 bg-black/40 px-3 py-2 backdrop-blur-sm transition hover:bg-white/3",children:[n==="running"&&t.jsx("span",{className:"absolute inset-x-0 top-0 h-0.5 animate-[pulse_1.2s_ease-in-out_infinite] bg-gradient-to-r from-transparent via-red-400/40 to-transparent"}),t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-soft",children:e}),t.jsx("button",{onClick:()=>p(e),disabled:a||n==="running",className:"rounded border border-red-900/40 bg-black/40 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.25em] text-red-100 transition hover:bg-red-900/30 disabled:cursor-not-allowed disabled:opacity-60",children:n==="running"?"Scanning":"Run"})]}),t.jsxs(b,{children:[t.jsx(x,{asChild:!0,children:t.jsxs("span",{className:`flex items-center gap-2 text-[12px] font-semibold uppercase tracking-widest ${d[n].tone}`,children:[t.jsx("span",{className:"indicator-dot"}),d[n].badge]})}),t.jsx(g,{children:d[n].description})]})]})]},e)})})]})}export{v as default};
